
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Middleman Basics 02 - Drafts Previewer</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="Topics Data Files
Pretty URLs
Asset Pipleline
Project Templates
Data Files So you have already learned how to play with data that you stored in the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://vis-kid.github.io/octo-draft/blog/2015/11/13/Middleman-Bascis-02/">
  <link href="/octopress_drafts_previewer/favicon.png" rel="icon">
  <link href="/octopress_drafts_previewer/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/octopress_drafts_previewer/atom.xml" rel="alternate" title="Drafts Previewer" type="application/atom+xml">
  <script src="/octopress_drafts_previewer/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/octopress_drafts_previewer/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/octopress_drafts_previewer/">Drafts Previewer</a></h1>
  
    <h2>Simple way to share my drafts for feedback</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/octopress_drafts_previewer/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="vis-kid.github.io/octo-draft">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/octopress_drafts_previewer/">Blog</a></li>
  <li><a href="/octopress_drafts_previewer/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Middleman Basics 02</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-11-13T04:29:10+01:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>4:29 am</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p><img src="/octopress_drafts_previewer/images/middleman/3Stooges_600_mirrored.jpg"></p>

<h3>Topics</h3>

<ul>
<li>Data Files</li>
<li>Pretty URLs</li>
<li>Asset Pipleline</li>
<li><p>Project Templates</p></li>
<li><h3>Data Files</h3></li>
</ul>


<p>So you have already learned how to play with data that you stored in the triple-hyphen-delimited frontmatter sections of individual pages. You can write separate data files in YAML or JSON and put them in a <strong>/data</strong> directory. I guess this is mostly useful if you have more complex sites with data that rarely changes and where you don’t want to maintain that data directly in your HTML.</p>

<p>Let’s say you have the rights to sell all James Bond movies. We could put a list of them in a data file and iterate over them in our view. If we’d need to change or update that data when a new movie is available you’d only need to apply that change in your <strong>.yaml</strong> or <strong>.json</strong> data file. I would not recommend doing that for data that is in any way complex—to a degree doable, but feels very iffy and wrong.</p>

<p><strong>/data/bond.yaml</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="ss">movies</span><span class="p">:</span>
</span><span class='line'><span class="o">-</span> <span class="ss">title</span><span class="p">:</span> <span class="s2">&quot;Dr. No&quot;</span>
</span><span class='line'>  <span class="ss">year</span><span class="p">:</span>  <span class="s2">&quot;1962&quot;</span>
</span><span class='line'>  <span class="ss">text</span><span class="p">:</span>  <span class="s2">&quot;John Strangways, the British Intelligence (SIS) Station Chief in Jamaica, is killed. In response, British agent James Bond—also known as 007—is sent to Jamaica to investigate the circumstances. During his investigation Bond meets Quarrel, a Cayman fisherman, who had been working with Strangways around the nearby islands to collect mineral samples. One of the islands was Crab Key, home to the reclusive Dr. No.&quot;</span>
</span><span class='line'>  <span class="ss">image</span><span class="p">:</span> <span class="s2">&quot;bond_movie_01.png&quot;</span>
</span><span class='line'><span class="o">-</span> <span class="ss">title</span><span class="p">:</span> <span class="s2">&quot;From Russia with Love&quot;</span>
</span><span class='line'>  <span class="ss">year</span><span class="p">:</span>  <span class="s2">&quot;1963&quot;</span>
</span><span class='line'>  <span class="ss">text</span><span class="p">:</span>  <span class="s2">&quot;SPECTRE&#39;s expert planner Kronsteen devises a plot to steal a Lektor cryptographic device from the Soviets and sell it back to them while exacting revenge on Bond for killing their agent Dr. No; ex-SMERSH operative Rosa Klebb is in charge of the mission. She recruits Donald &quot;</span><span class="no">Red</span><span class="s2">&quot; Grant as an assassin and Tatiana Romanova, a cipher clerk at the Soviet consulate in Istanbul, as the unwitting bait.&quot;</span>
</span><span class='line'>  <span class="ss">image</span><span class="p">:</span> <span class="s2">&quot;bond_movie_02.png&quot;</span>
</span><span class='line'><span class="o">-</span> <span class="ss">title</span><span class="p">:</span> <span class="s2">&quot;Goldfinger&quot;</span>
</span><span class='line'>  <span class="ss">year</span><span class="p">:</span>  <span class="s2">&quot;1964&quot;</span>
</span><span class='line'>  <span class="ss">text</span><span class="p">:</span>  <span class="s2">&quot;Bond is ordered to observe bullion dealer Auric Goldfinger: he sees Goldfinger cheating at cards and stops him by distracting his employee, who is subsequently killed by Goldfinger&#39;s Korean manservant Oddjob. Bond is then instructed to investigate Goldfinger&#39;s gold smuggling and he follows the dealer to Switzerland. Bond is captured when he reconnoitres Goldfinger&#39;s plant and is drugged; he is taken to Goldfinger&#39;s Kentucky stud farm and is imprisoned. He escapes briefly to witness Goldfinger&#39;s meeting with U.S. mafiosi, who have brought the materials he needs for an operation to rob Fort Knox.&quot;</span>
</span><span class='line'>  <span class="ss">image</span><span class="p">:</span> <span class="s2">&quot;bond_movie_03.png&quot;</span>
</span><span class='line'><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>source/bond-movies.html.erb</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='erb'><span class='line'><span class="x">&lt;h2&gt;Bond movies&lt;/h2&gt;</span>
</span><span class='line'><span class="x">&lt;ol&gt;</span>
</span><span class='line'><span class="cp">&lt;%</span> <span class="n">data</span><span class="o">.</span><span class="n">bond</span><span class="o">.</span><span class="n">movies</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">movie</span><span class="o">|</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">  &lt;li&gt;</span>
</span><span class='line'><span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">image_tag</span> <span class="n">movie</span><span class="o">.</span><span class="n">image</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">    &lt;h3&gt;</span><span class="cp">&lt;%=</span> <span class="n">movie</span><span class="o">.</span><span class="n">title</span> <span class="cp">%&gt;</span><span class="x">&lt;/h3&gt;</span>
</span><span class='line'><span class="x">    &lt;h6&gt;</span><span class="cp">&lt;%=</span> <span class="n">movie</span><span class="o">.</span><span class="n">year</span> <span class="cp">%&gt;</span><span class="x">&lt;/h6&gt;</span>
</span><span class='line'><span class="x">    &lt;p&gt; </span><span class="cp">&lt;%=</span> <span class="n">movie</span><span class="o">.</span><span class="n">text</span> <span class="cp">%&gt;</span><span class="x">&lt;/p&gt;</span>
</span><span class='line'><span class="x">  &lt;/li&gt;</span>
</span><span class='line'><span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="x">&lt;/ol&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>One of the advantages of these data files is surely that they aren’t very susceptible to getting hacked. Even better, your <strong>/data</strong> directory with all the YAML or JSON data won’t get pushed to your branch that is responsible for hosting—like your <strong>gh-pages</strong> branch if you host your Middleman app on GitHub Pages. During the <strong>build</strong> phase, your data gets injected into your templates localy before it gets deployed. After that, the data in your views is just plain static HTML. Pretty cool!</p>

<p>A word about naming conventions here. When you have data files in a <strong>data</strong> directory you get access to a <strong>data</strong> object. Middleman then creates “objects” for every <strong>.yml</strong>, <strong>.yaml</strong> or <strong>.json</strong> file which you can access through the inital <strong>data</strong> object by chaining it on. Lastly, the object stored in your data files are added on to that—which in turn give you access to the attributes you have stored on that object. In our case, we have a <strong>movies</strong> YAML “object” with the attributes <strong>title</strong>, <strong>year</strong>, <strong>text</strong> and <strong>image</strong>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='erb'><span class='line'><span class="cp">&lt;%=</span> <span class="n">data</span><span class="o">.</span><span class="n">data_file_name</span><span class="o">.</span><span class="n">yaml_or_json_object</span><span class="o">.</span><span class="n">attribute</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'>
</span><span class='line'><span class="cp">&lt;%=</span> <span class="n">data</span><span class="o">.</span><span class="n">bond</span><span class="o">.</span><span class="n">movies</span><span class="o">.</span><span class="n">image</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="cp">&lt;%=</span> <span class="n">data</span><span class="o">.</span><span class="n">bond</span><span class="o">.</span><span class="n">movies</span><span class="o">.</span><span class="n">title</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="cp">&lt;%=</span> <span class="n">data</span><span class="o">.</span><span class="n">bond</span><span class="o">.</span><span class="n">movies</span><span class="o">.</span><span class="n">year</span> <span class="cp">%&gt;</span><span class="x"></span>
</span><span class='line'><span class="cp">&lt;%=</span> <span class="n">data</span><span class="o">.</span><span class="n">bond</span><span class="o">.</span><span class="n">movies</span><span class="o">.</span><span class="n">text</span> <span class="cp">%&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>If you have subdirectories, you just need to tuck them on. Let’s say you have your bond movies data file under a <strong>spy_movies</strong> directory (<strong>/data/spy_movies/bond.yaml</strong>) You’d now access it like so:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='erb'><span class='line'><span class="cp">&lt;%=</span> <span class="n">data</span><span class="o">.</span><span class="n">spy_movies</span><span class="o">.</span><span class="n">bond</span><span class="o">.</span><span class="n">movies</span><span class="o">.</span><span class="n">title</span> <span class="cp">%&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>Lastly I should add that storing it in JSON might be cooler but all the excess commas, brackets and braces turn me off tbh. Not only in data files but in frontmatter sections as well. Up to you what suits you best of course. See for yourself:</p>

<p><strong>some_file.yaml</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">bond_girls</span><span class="p-Indicator">:</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Strawberry Fields</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Jill Masterson</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Tiffany Case</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>some_file.json</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;bond_girls&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="s2">&quot;Strawberry Fields&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Jill Masterson&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Tiffany Case&quot;</span>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><h3>Pretty URLs</h3></li>
</ul>


<p>If you have a file like <strong>source/bond-movies.html.erb</strong> it will end up as <a href="http://appname.com/bond-movies.html.">http://appname.com/bond-movies.html.</a> During the build process we loose the <strong>.erb</strong> file extension and end up with the final <strong>html</strong> version of that page which is mirrored in the URL. That’s alright, normal stuff. For fancier URLs like <a href="http://appname.com/bond-movies">http://appname.com/bond-movies</a> we gotta work a little.</p>

<p>You need to activate the <strong>Directory Indexes</strong> extension in your config.rb. This creates a folder for every <strong>.html</strong> file. During <strong>middleman build</strong> the finished page ends up as the index file of that folder—meaning that as an index file its extension won’t need to show up in the URL. If you paid attention, you might have already seen this at work with the standard <strong>index.html</strong> file that gets created for every Middleman project as a landing page. It also does not show up in the final URL. Fire up your server and see for yourself.</p>

<p><strong>config.rb</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">activate</span> <span class="ss">:directory_indexes</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let’s see what happened after <strong>middleman build</strong> to your <strong>bond-movies.html.erb</strong> file if you activated that extension. Middleman created a <strong>build/bond-movies</strong> folder and your original filename changed to <strong>index.html</strong> => <strong>build/bond-movies/index.html</strong>.</p>

<p><strong>Shell output</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>create  build/bond-movies/index.html
</span></code></pre></td></tr></table></div></figure>


<p>There is one little caveat though. Before you activated pretty URLs you could rely on using the assets path. Now with directory indexes in place you need to supply assets with their full absolute path. So calling an image just by its name for example won’t fly anymore.</p>

<p>If for some reason you want to override the behaviour of that extension for a particular file you can.</p>

<p><strong>config.rb</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">page</span> <span class="s2">&quot;/bond-movies.html&quot;</span><span class="p">,</span> <span class="ss">:directory_index</span> <span class="o">=&gt;</span> <span class="kp">false</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Shell output</strong> if you change it back for <strong>bond-movies.html.erb</strong>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>create  build/bond-movies.html
</span><span class='line'>remove  build/bond-movies/index.html
</span><span class='line'>remove  build/bond-movies
</span></code></pre></td></tr></table></div></figure>


<p>Now its’ URL is back to normal for that file again. (<a href="http://appname.com/bond-movies.html">http://appname.com/bond-movies.html</a>)</p>

<p>Btw, you can opt-out of the directory index naming scheme locally in your individual pages’ frontmatter as well.</p>

<p><strong>source/bond-movies.html.erb</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='erb'><span class='line'><span class="x">---</span>
</span><span class='line'><span class="x">directory_index: false</span>
</span><span class='line'><span class="x">---</span>
</span><span class='line'>
</span><span class='line'><span class="x">&lt;h1&gt;Bond movies&lt;/h1&gt;</span>
</span><span class='line'><span class="x">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you wanna build that structure with folder and their respective index files yourself, Middleman is not gonna mess with you. It functions the same way and middleman ignores them if you mix and match that approach.</p>

<ul>
<li><h3>Asset Pipleline</h3></li>
</ul>


<p>I wanna cut to the chase with this one and only show you the pieces that I think are really relevant about the asset pipeline. You can do stuff with Bower and Compass for example but since I’m personally not a huge fan I spare us both the time. O.K. then.</p>

<p>The “asset pipleline” is Rails lingo imported into Middleman and under the hood a gem called <a href="https://github.com/sstephenson/sprockets">Sprockets</a> does all the heavy lifting. It helps you with handling dependency management, combining assets plus with minification—which helps slimming down your assets significantly. A few helper methods to concisely reference assets are also at your disposal. Beyond that you are also provided with the means to write Sass and CoffeeScript code—right out of the box. Awesome!</p>

<h3>Concatenation</h3>

<p>Concatenation is one of the most important features of the asset pipline. Instead of having a lot of separate HTML requests for every CSS and JS file, you can reduce them drastically by concatenating them into one or a handful of files. The fewer requests you cause the faster your application will load. Simple math.</p>

<h3>JS Concatenation</h3>

<p>By default, Sprockets will press all JS files into a single <strong>.js</strong> file. After <strong>middleman build</strong>, this file will be under <strong>/build/javascripts/all.js</strong>. The same goes for your CSS. After the build process, you’ll have all Sass files concatenated together in <strong>build/stylesheets/all.css</strong>.</p>

<p>You combine your JS assets by using partials—whoose filenames start with an underscore—for all your JS files and then <strong>require</strong> them at the very top in your <strong>source/javascripts/all.js</strong> file (Files with an added <strong>.coffee</strong> extension work exactly the same). As you can imagine order does matter for this process.</p>

<p><strong>source/javascript/all.js</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">//= require &quot;_jquery&quot;</span>
</span><span class='line'><span class="c1">//= require &quot;_lib_code&quot;</span>
</span><span class='line'><span class="c1">//= require &quot;_animations&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Screenshot</strong>:</p>

<p><img src="/octopress_drafts_previewer/images/middleman/basics_02/source_javascripts_screenshot.png"></p>

<p>When you take a look into your new <strong>/build</strong> directory, you’ll only find one <strong>.js</strong> file under <strong>/javascripts</strong> which “digested” the rest of your files—namely <strong>all.js</strong>.</p>

<p><strong>Screenshot</strong>:</p>

<p><img src="/octopress_drafts_previewer/images/middleman/basics_02/build_javascripts_screenshot.png"></p>

<h3>CSS Concatenation</h3>

<p>For your Sass code its bascially the same but you should use Sass’s <strong>@import</strong> for importing your partials—instead of require from Sprockets. Again, place the “required” files at the very top and order matters here as well. Unlike requiring JS partials, you leave off the underscore from the partial name when you import Sass partials.</p>

<p><strong>/source/stylesheets/all.css.scss</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sass'><span class='line'><span class="k">@import</span> <span class="s">&#39;normalize&#39;;</span>
</span><span class='line'><span class="k">@import</span> <span class="s">&#39;header&#39;;</span>
</span><span class='line'><span class="k">@import</span> <span class="s">&#39;navigation&#39;;</span>
</span><span class='line'><span class="k">@import</span> <span class="s">&#39;footer&#39;;</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Screenshot</strong>:</p>

<p><img src="/octopress_drafts_previewer/images/middleman/basics_02/source_stylesheets_screenshot.png"></p>

<p><strong>Screenshot</strong>:</p>

<p><img src="/octopress_drafts_previewer/images/middleman/basics_02/build_stylesheets_screenshot.png"></p>

<h3>Compression / Minification</h3>

<p>Another cool feature of sprockets is compression of these files—also called minification. This process cuts out a lot of the fat like getting rid of unnecessary whitespace and comments. People also call this process <em>uglify</em>—and of course there is a gem called <a href="https://github.com/lautis/uglifier">uglifier</a> which does a beautiful job at this. Names like this makes me love programming even more. Compared to JS asset minification CSS uglification is not that complicated. FYI, behind the scenes , the JS part is a bit more involved and needs more finesse.</p>

<p>To get started you’ll need to add the following to your <strong>config.rb</strong> file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">configure</span> <span class="ss">:build</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">activate</span> <span class="ss">:minify_css</span>
</span><span class='line'>  <span class="n">activate</span> <span class="ss">:minify_javascript</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Actually you just need to uncomment these lines under your <strong>:build</strong> block. The next time you use <strong>middleman build</strong> the assets in your <strong>/build</strong> folder will all be uglified and slim. Below are two small examples how this code actually ends up looking:</p>

<p><strong>Minified CSS under /build/stylesheets/all.css</strong>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">body</span><span class="p">{</span><span class="k">background-color</span><span class="o">:</span><span class="m">#d0e4fe</span><span class="p">}</span><span class="nt">h1</span><span class="p">{</span><span class="k">color</span><span class="o">:</span><span class="nb">orange</span><span class="p">;</span><span class="k">text-align</span><span class="o">:</span><span class="k">center</span><span class="p">}</span><span class="nt">p</span><span class="p">{</span><span class="k">font-family</span><span class="o">:</span><span class="s2">&quot;Times New Roman&quot;</span><span class="p">;</span><span class="k">font-size</span><span class="o">:</span><span class="m">20px</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Minified JS under /build/javascripts/all.js</strong>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="k">switch</span><span class="p">((</span><span class="k">new</span> <span class="nb">Date</span><span class="p">).</span><span class="nx">getDay</span><span class="p">()){</span><span class="k">case</span> <span class="mi">0</span><span class="o">:</span><span class="nx">day</span><span class="o">=</span><span class="s2">&quot;Sunday&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="mi">1</span><span class="o">:</span><span class="nx">day</span><span class="o">=</span><span class="s2">&quot;Monday&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="mi">2</span><span class="o">:</span><span class="nx">day</span><span class="o">=</span><span class="s2">&quot;Tuesday&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="mi">3</span><span class="o">:</span><span class="nx">day</span><span class="o">=</span><span class="s2">&quot;Wednesday&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="mi">4</span><span class="o">:</span><span class="nx">day</span><span class="o">=</span><span class="s2">&quot;Thursday&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="mi">5</span><span class="o">:</span><span class="nx">day</span><span class="o">=</span><span class="s2">&quot;Friday&quot;</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span> <span class="mi">6</span><span class="o">:</span><span class="nx">day</span><span class="o">=</span><span class="s2">&quot;Saturday&quot;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Without the asset pipleline you’d have to set up your own thing to write your JS and CSS via a higher-level language like CoffeeScript and Sass. I believe for beginners this setup part can be a pain and therefore the asset pipleline helps newbies to get going and play with cool toys faster. Doing this by hand is a good exercise and important to grasp—but not right away. CoffeeScript and Sass are supported by default.</p>

<p>Awesome, minified, faster websites with fewer requests right out of the gate without any extra work. Take that 2010!</p>

<h3>Asset Pipeline Helpers</h3>

<p>For your Sass files you have four helpers at your disposal:</p>

<ul>
<li>image_path()</li>
<li>font_path()</li>
<li>image_url()</li>
<li>font_url()</li>
</ul>


<p>Because you followed conventions so far you can use these helpers to prepend the correct directory path to your assets.</p>

<p>Some Sass file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sass'><span class='line'><span class="nt">image_path</span><span class="o">(</span><span class="s1">&#39;</span><span class="s2">logo.png&#39;</span><span class="o">)</span>
</span><span class='line'><span class="na">#</span><span class="o"> =&gt;</span> <span class="n">images</span><span class="o">/</span><span class="n">logo</span><span class="o">.</span><span class="n">png</span>
</span><span class='line'>
</span><span class='line'><span class="nt">image_path</span><span class="o">(</span><span class="s1">&#39;</span><span class="s2">nested_folder/some.png&#39;</span><span class="o">)</span>
</span><span class='line'><span class="na">#</span><span class="o"> =&gt;</span> <span class="n">images</span><span class="o">/</span><span class="n">nested_folder</span><span class="o">/</span><span class="n">some</span><span class="o">.</span><span class="n">png</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Import Path</h3>

<p>The asset pipeline uses <em>import paths</em> via Sprockets for your assets. By default <strong>:js_dir</strong> and <strong>:css_dir</strong> are already added to that path. That means that files put in <strong>/source/javascripts</strong> and <strong>/source/stylesheets</strong> are available and automatically imported. On the other hand, if you have assets that you wanna keep in other directories you can also add them to the import path like this:</p>

<p><strong>config.rb</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">sprockets</span><span class="o">.</span><span class="n">append_path</span> <span class="s1">&#39;/some/other/assets_folder/&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>In this example, other assets in <strong>source/some/other/assets_folder/other.css</strong> are also at Middleman’s disposal via this path. Same goes for <strong>.js</strong> files as well of course.</p>

<ul>
<li><h3>Project Templates</h3></li>
</ul>


<p>Middleman comes with a couple of handy project templates that you should at least know about. These templates give you a good starting point when you initiate a new Middleman app for example. You can add these templates at any time later as well though.</p>

<ul>
<li><strong>SMACSS</strong> Template</li>
<li><strong>Mobile</strong> Boilerplate Template</li>
<li><strong>HTML5</strong> Boilerplate  Template</li>
<li><strong>Blog</strong> Template(needs extra gem)</li>
</ul>


<p>You can use them like this:</p>

<p><strong>Shell</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>middleman init your_fancy_app --template<span class="o">=</span>smacss
</span></code></pre></td></tr></table></div></figure>


<p>The template will provide you with all the files and folders that it needs. If you already have an app and want to add a template you use the same command without mentioning your app’s name. Same deal:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>middleman init --template<span class="o">=</span>smacss
</span></code></pre></td></tr></table></div></figure>


<p>Now comes my favorite part of Middleman. Its super straightforward to build your own templates and reuse them whenever you like. You start by creating a <strong>~/.middleman</strong> folder in your root directory (Don’t forget the dot in front of the name). Within that directory you create new folders for your templates. For example <strong>/.middleman/podcast</strong> would be a <em>podcast</em> template. Then you fill this podcast dirctory with all the files and folders you need. For example, if you want to have additional stylesheets available for your Middleman app then you need to simulate Middleman’s filepath to make it super easy to use them.</p>

<p>In the screenshot below I have prepared a dummy example that has a couple of files that I might need for every project and put them in a <strong>bourbon</strong> folder. Now I have a bourbon template.</p>

<p><strong>Screenshot for ~/.middleman/bourbon</strong>:</p>

<p><img src="/octopress_drafts_previewer/images/middleman/basics_02/bourbon_template_screenshot.png"></p>

<p>Since I simulated Middleman’s file structure, these stylesheets will show up exactly where I need them after I initiated that template. After initiating the template, my files are now under <strong>/source/stylesheets</strong> and also ready to be imported into my <strong>/source/stylesheets/all.css.scss</strong> file.</p>

<p><strong>Screenshot for /middleman_app/source/stylesheets</strong>:</p>

<p><img src="/octopress_drafts_previewer/images/middleman/basics_02/source_bourbon_screenshot.png"></p>

<p>Since I already made my template styles partials its business as usual:</p>

<p><strong>source/stylesheets/all.css.scss</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="k">@import</span> <span class="s1">&#39;</span><span class="s2">bourbon_mixins/mixins&#39;</span><span class="p">;</span>
</span><span class='line'><span class="k">@import</span> <span class="s1">&#39;</span><span class="s2">bourbon_neat/grids&#39;</span><span class="p">;</span>
</span><span class='line'><span class="k">@import</span> <span class="s1">&#39;</span><span class="s2">bourbon_refills/cards&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nc">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>Boom! Finished! One thing you should be careful about though. When we use <strong>middleman build</strong> now to create our new <strong>build</strong> directory these files will get absorbed by <strong>all.css</strong> and none of the bourbon template folders will show up there. However, if you forget to have a leading underscore in your filenames for these styles, the complete folder will transfer into <strong>/build</strong>—with the prospective <strong>.css</strong> files of course. The <strong>@import</strong> statements in <strong>all.css.scss</strong> didn’t make a difference in that case either.</p>

<p>If you have a ton of templates and wanna just check the list for a name you can use the following command:</p>

<p><strong>Shell</strong>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>middleman init --help
</span><span class='line'>
</span><span class='line'><span class="c"># =&gt;  # Use a project template: default, html5, mobile, smacss, bourbon</span>
</span></code></pre></td></tr></table></div></figure>


<p>In case you wanna reinvent the wheel, take a look at these open sourced <a href="https://directory.middlemanapp.com/#/templates/all/">templates</a>. If you have never played much with templates, I recommend initiating a dummy app and take them for a spin. See what files get created or overwritten. Poke around a little bit. Then build a dummy folder with a couple of Sass files for a template under <strong>~/.middleman</strong> and see what happens when you initiate this template. Nothing beats learning by doing these little experiments along the way!</p>

<h3>Final Thoughts</h3>

<p>I believe you are now more than ready to start building some little app with Middleman. There are a few things left for you to learn on your own but I presented you with the most important pieces of the puzzle. Middleman is a lot of fun and a good choice technology-wise. Sure there are the purists who mumble about technical implementations but these people are rarely satisfied with implementations other than their own. They might be right, but at this stage in your career you’re most likely not at that point yet where you need to worry about this and therefore should selectively ignore this snobbery. Middleman is powerful, easy to use and has a straightforward API that is beginner friendly—that’s all that matters for now. Have fun!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Your Name</span></span>

      




<time class='entry-date' datetime='2015-11-13T04:29:10+01:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>4:29 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/octopress_drafts_previewer/blog/categories/bdd/'>bdd</a>, <a class='category' href='/octopress_drafts_previewer/blog/categories/factory-girl/'>factory girl</a>, <a class='category' href='/octopress_drafts_previewer/blog/categories/rails/'>rails</a>, <a class='category' href='/octopress_drafts_previewer/blog/categories/rspec/'>rspec</a>, <a class='category' href='/octopress_drafts_previewer/blog/categories/ruby/'>ruby</a>, <a class='category' href='/octopress_drafts_previewer/blog/categories/tdd/'>tdd</a>, <a class='category' href='/octopress_drafts_previewer/blog/categories/test-driven-design/'>test-driven-design</a>, <a class='category' href='/octopress_drafts_previewer/blog/categories/thoughtbot/'>thoughtbot</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://vis-kid.github.io/octo-draft/blog/2015/11/13/Middleman-Bascis-02/" data-via="" data-counturl="http://vis-kid.github.io/octo-draft/blog/2015/11/13/Middleman-Bascis-02/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/octopress_drafts_previewer/blog/2015/11/13/Code-Smells-02/" title="Previous Post: Ruby / Rails Code Smells 02">&laquo; Ruby / Rails Code Smells 02</a>
      
      
        <a class="basic-alignment right" href="/octopress_drafts_previewer/blog/2015/11/22/Middleman-03-Podcast-01/" title="Next Post: Middleman Basics 03-Podcast Site (Part 01)">Middleman Basics 03-Podcast Site (Part 01) &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/octopress_drafts_previewer/blog/2016/03/03/Visial-Design-101/">Visual Design 101</a>
      </li>
    
      <li class="post">
        <a href="/octopress_drafts_previewer/blog/2016/02/25/Slim-Basics-02/">Slim Basics 02</a>
      </li>
    
      <li class="post">
        <a href="/octopress_drafts_previewer/blog/2016/02/10/AntiPattern-Basics-Rails-Tests/">AntiPatterns Basics Rails—Tests</a>
      </li>
    
      <li class="post">
        <a href="/octopress_drafts_previewer/blog/2016/02/08/Slim-Basics-01/">Slim Basics 01</a>
      </li>
    
      <li class="post">
        <a href="/octopress_drafts_previewer/blog/2016/01/25/AntiPatterns-Basics-Rails-Controllers/">AntiPatterns Basics—Rails Controllers</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
